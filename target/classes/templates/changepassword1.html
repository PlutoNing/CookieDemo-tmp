<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <!-- Favicon -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="css/assets/font-awesome.min.css">
    <link rel="stylesheet" href="css/assets/bootstrap.min.css" >
    <link rel="stylesheet" href="css/assets/flaticon.css">
    <link rel="stylesheet" href="css/assets/magnific-popup.css">
    <link rel="stylesheet" href="css/assets/meanmenu.css">
    <!-- owl carousel -->
    <link rel="stylesheet" href="css/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="css/assets/owl.theme.default.min.css">
    <!-- Main Css -->
    <link rel="stylesheet" href="css/assets/stl.css">
    <link rel="stylesheet" href="css/assets/rs.css">
    <link rel="stylesheet" href="css/assets/ms.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/assets/inner-pages.css">
    <link rel="stylesheet" href="css/assets/inner-pages-responsive.css">
    <link rel="stylesheet" href="css/assets/wallet.css">


    <style>
        li{
            list-style-type: none;
        }
        #menu {
            width: 370px;
            margin: 30px auto 0px;
            height: 45px;
            background-color: #030e11;
        }
        #menu li{
            float: left;
            width: 92px;
            line-height:39px;
            text-align: center;
            position:relative;
            border:none;
        }
        #menu li a {
            font-size:16px; color: #e6f8e9;
            display:block;
            outline:0;
            text-decoration:none;
        }
        #menu li:hover a {
            color: #ff0000; /*导航栏文字颜色 */
        }
        #menu li:hover .dropdown_1column {
            left:0px;
            top:38px;
        }
        .dropdown_1column{ /* 下拉菜单边框颜色*/
            margin: 0px auto;
            float: left;
            position: absolute;
            left: -999em;
            text-align: left;
            border: 1px solid #066591;
            border-top: none;
            background: #F4F4F4;
            width: 140px;
        }
        #menu li:hover div a { /* 下拉菜单文字颜色*/
            font-size:12px
        ;color:#444;
        }

        #menu li:hover div a:hover{color:#21910e;} /*下拉带单鼠标停留颜色*/

        #menu li ul {
            list-style:none;padding:10px 5px;
            margin:0;
        }
        #menu li ul li {
            font-size:12px;
            line-height:26px;
            position:relative;
            padding:0;margin:0;
            float:none;
            text-align:left;
            width:130px;
        }
        #menu li ul li:hover {
            background:none;
            border:none;padding:0;
            margin:0;
        }
    </style>
    <link rel="stylesheet" href="css/login/demo.css">
    <link rel="stylesheet" href="css/login/style1.css">
    <link rel="stylesheet" href="css/login/iconfont.css">
</head>
<body style="background-color: #333">
<script src="/js/login/jquery.js"></script>

<div id="topbar">
    <h1>

    </h1>

    <form th:action="@{/addressbyid}">
        <!--下拉条-->
        <div id="menu" style="    margin-top: 0px;margin-left: 0px;margin-right: 0px;display: inline;">
            <ul style="display: inline">
                <li> <a href="/" class="nodrop">首页</a></li>
                <li><a href="/changepassword" class="drop">个人中心</a>
                    <div class="dropdown_1column">
                        <div class="col_1">
                            <ul class="simple">
                                <li><a href="/userinfo">个人资料</a></li>
                                <li><a href="/changepassword">密码管理</a></li>
                                <li><a href="">账号绑定</a></li>
                                <li><a href="/logout">退出帐号</a></li>
                            </ul>
                        </div>

                    </div>
                </li>
                <li><a href="/logout" class="nodrop">退出</a></li>
            </ul>
        </div>
        <span style="font-size: medium; color: white; ">欢迎：</span>   	<span th:text="${username}" style="font-size: medium;color: white"></span>
        <!--
                    <a href="" style="font-size: medium;color: white;height: 30px;display: inline;margin-left: 20px">个人中心</a>
        -->


        <!--
                    <a href="/logout" style="font-size: medium;color: white;height: 30px;display: inline;margin-left: 20px;">退出</a>
        -->

    </form>
</div>

    <div id="main" style="margin-bottom: 100px;">
        <h3>


        </h3>
        <div class="login-box" style="margin-top:50px;">
         <div class="box-con tran">
        <div class="signup f-l">
            <!-- 邮箱注册start -->
            <form action="/changepassword1" method="post" onchange="HashFunction1();HashFunction2()">
            <span>设置密码</span>
                <span th:text="${error}" style="font-size: medium;color: red;display: block"></span>
<!--                <div class="form-group">
                    <div class="form-group" style="height: 50px;margin-bottom: 0px">
                        <input id="raw_password" type="password" name="password_old" placeholder="原密码">
                        <input id="password" type="hidden" name="password">
                    </div>
                </div>-->
                <div class="signup-email">
                    <div class="form-group">
                        <input id="raw_password1" type="password"  placeholder="设置密码（字母、数字，至少6位）" onblur="verify.PasswordLenght(this)">
                        <input id="password1" type="hidden" name="password1">
                        <span class="error-notic">密码长度不够</span>
                    </div>
                    <div class="form-group">
                        <input id="raw_password2" type="password"  placeholder="再次输入密码" >
                        <input id="password2" type="hidden" name="password2">

                    </div>
                    <div class="form-group">
                            <input type="submit" value="设置" style="
                                margin-bottom: 30px;
                            ">                       
                         <input type="reset" value="取消">

                         </div>  
            </div>
            </form>
            </div>
            </div>

    </div>
    </div>


<script>
    var _handle='';//储存电话是否填写正确
    $(function(){
        $(".signup-form input").on("focus",function(){
            $(this).parent().addClass("border");
        });
        $(".signup-form input").on("blur",function(){
            $(this).parent().removeClass("border");
        })
        //注册方式切换
        $(".signup-select").on("click",function(){
            var _text=$(this).text();
            var $_input=$(this).prev();
            $_input.val('');
            if(_text=="手机注册"){
                $(".signup-tel").fadeIn(200);
                $(".signup-email").fadeOut(180);
                $(this).text("邮箱注册");
                $_input.attr("placeholder","手机号码");
                $_input.attr("onblur","verify.verifyMobile(this)");
                $(this).parents(".form-group").find(".error-notic").text("手机号码格式不正确")
            }
            if(_text=="邮箱注册"){
                $(".signup-tel").fadeOut(180);
                $(".signup-email").fadeIn(200);
                $(this).text("手机注册");
                $_input.attr("placeholder","邮箱");
                $_input.attr("onblur","verify.verifyEmail(this)");
                $(this).parents(".form-group").find(".error-notic").text("邮箱格式不正确")
            }
        });
        //步骤切换
        var _boxCon=$(".box-con");
        $(".move-login").on("click",function(){
            $(_boxCon).css({
                'marginLeft':0
            })
        });
        $(".move-signup").on("click",function(){
            $(_boxCon).css({
                'marginLeft':-320
            })
        });
        $(".move-other").on("click",function(){
            $(_boxCon).css({
                'marginLeft':-640
            })
        });

        $(".move-syc").on("click",function(){
            $(_boxCon).css({
            })
        });
        $(".move-reset").on("click",function(){
            $(_boxCon).css({
                'marginLeft':-960
            })
        });
        $("body").on("click",".move-addinf",function(){
            $(_boxCon).css({
                'marginLeft':-1280
            })
        });
        //获取短信验证码
        var messageVerify=function (){
            $(".get-message").on("click",function(){
                if(_handle){
                    $("#message-inf").fadeIn(100)
                    $(this).html('<a href="javascript:;">下一步</a><img class="loading" src="../images/loading.gif">').addClass("move-addinf");
                }
            });
        }();
    });
    //表单验证
    function showNotic(_this){
        $(_this).parents(".form-group").find(".error-notic").fadeIn(100);
        $(_this).focus();
    }
    //错误提示显示
    function hideNotic(_this){
        $(_this).parents(".form-group").find(".error-notic").fadeOut(100);
    }
    //错误提示隐藏
    var verify={
        verifyEmail:function(_this){
            var validateReg = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            var _value=$(_this).val();
            if(!validateReg.test(_value)){
                showNotic(_this)
            }else{
                hideNotic(_this)
            }
        },
        //验证邮箱
        verifyMobile:function(_this){
            var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
            var _value=$(_this).val();
            if(!validateReg.test(_value)){
                showNotic(_this);
                _handle=false;
            }else{
                hideNotic(_this);
                _handle=true;
            }
            return _handle
        },
        //验证手机号码
        PasswordLenght:function(_this){
            var _length=$(_this).val().length;
            if(_length<6){
                showNotic(_this)
            }else{
                hideNotic(_this)
            }
        },
        //验证设置密码长度
        VerifyCount:function(_this){
            var _count="123456";
            var _value=$(_this).val();
            alert(_value);
            console.log(_value)
            if(_value!=_count){
                showNotic(_this)
            }else{
                hideNotic(_this)
            }
        }
        //验证验证码
    }
</script>
    <script type="text/javascript" src="/js/login/core.js"></script>
    <script type="text/javascript" src="/js/login/cipher-core.js"></script>
    <script type="text/javascript" src="/js/login/sha256.js"></script>
    <script>
        function HashFunction(){
            var psw=document.getElementById("raw_password").value;
            var hash = CryptoJS.SHA256(psw).toString();
            document.getElementById("password").value = hash;
            console.log("hash:" + hash);
        }
    </script>
    <script>
        function HashFunction1(){
            var psw=document.getElementById("raw_password1").value;
            var hash = CryptoJS.SHA256(psw).toString();
            document.getElementById("password1").value = hash;
            console.log("password1:" + hash);
        }
    </script>
    <script>
        function HashFunction2(){
            var psw=document.getElementById("raw_password2").value;
            var hash = CryptoJS.SHA256(psw).toString();
            document.getElementById("password2").value = hash;
            console.log("password2:" + hash);
        }
    </script>

</body>
</html>